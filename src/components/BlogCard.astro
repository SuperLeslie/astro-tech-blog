---
interface Props {
  id: number;
  slug: string;
  title: string;
  excerpt: string;
  date: string;
  featuredImage?: string;
}

const { id, slug, title, excerpt, date, featuredImage } = Astro.props;

// æ ¼å¼åŒ–æ—¥æœŸ
const formattedDate = new Date(date).toLocaleDateString('zh-CN', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

// æ¸…ç† excerpt ä¸­çš„ HTML æ ‡ç­¾
const cleanExcerpt = excerpt.replace(/<[^>]*>/g, '').slice(0, 150) + '...';
---

<a href={`/blog/${decodeURIComponent(slug)}`} class="block group h-full">
  <article class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 h-full flex flex-col">
    {featuredImage && (
      <div class="h-48 overflow-hidden shrink-0">
        <img 
          src={featuredImage} 
          alt={title}
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
          loading="lazy"
          decoding="async"
          width="400"
          height="300"
        />
      </div>
    )}
    {!featuredImage && (
      <div class="h-48 bg-linear-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink-0">
        <span class="text-white text-4xl">ğŸ“</span>
      </div>
    )}
    <div class="p-6 flex flex-col flex-grow">
      <p class="text-sm text-indigo-600 font-medium mb-2">{formattedDate}</p>
      <h2 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition-colors duration-200 line-clamp-2 h-14">
        {title}
      </h2>
      <p class="text-gray-600 text-sm leading-relaxed line-clamp-3 h-16 mb-auto">
        {cleanExcerpt}
      </p>
      <div class="mt-4 flex items-center text-indigo-600 font-medium text-sm">
        é˜…è¯»æ›´å¤š
        <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </div>
    </div>
  </article>
</a>
